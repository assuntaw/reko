<div class="background-container b-violet">
  <div class="master-container">
    <div class="paper-wrapper">
      <h1>TESTING COPY LINK</h1>

      <input id="visitorLink" type="text" value="<%= (rand * 100).floor %>" readonly style="opacity:0; width:1px; height:1px;"/>
      <button id="bttnCopyVisitorLink" class="bttn b-violet b-small" onclick="copy('visitorLink')">Copy Invitation Link</button>
      <br>
      <!-- TESTFIELD TO TEST -->
      <input type="text" value="" />
    </div>
  </div>
</div>

<script>

let copy = function(elementId) {
  var input = document.getElementById(elementId);
  var isiOSDevice = navigator.userAgent.match(/ipad|iphone/i);

  if (isiOSDevice) {
    var editable = input.contentEditable;
    var readOnly = input.readOnly;

    input.contentEditable = true;
    input.readOnly = false;

    var range = document.createRange();
    range.selectNodeContents(input);

    var selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(range);

    input.setSelectionRange(0, 999999);
    input.contentEditable = editable;
    input.readOnly = readOnly;

  } else {
    input.select();
  }

  document.execCommand('copy');
  const bttnCopyLink = document.getElementById("bttnCopyVisitorLink");
  bttnCopyLink.innerText = "copied!";
  bttnCopyLink.classList.remove("b-violet");
  bttnCopyLink.classList.add("b-dark-green");
  bttnCopyLink.setAttribute("style", "transition: ease 0.5s;");
  setTimeout(() => {
    bttnCopyLink.innerText = "Copy Invitation Link";
    bttnCopyLink.classList.add("b-violet");
  bttnCopyLink.classList.remove("b-dark-green");
  }, 2000);
}

</script>
